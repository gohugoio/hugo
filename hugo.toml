baseURL                = "https://gohugo.io/"
defaultContentLanguage = "en"
enableEmoji            = true
pluralizeListTitles    = false
timeZone               = "Europe/Oslo"
title                  = "Hugo"

# We do redirects via Netlify's _redirects file, generated by Hugo (see "outputs" below).
disableAliases = true

# See https://github.com/gohugoio/hugo/issues/13806.
ignoreLogs = ['warning-frontmatter-params-overrides']

[build]
  [build.buildStats]
    disableIDs = true
    enable     = true
  [[build.cachebusters]]
    source = "assets/notwatching/hugo_stats\\.json"
    target = "css"
  [[build.cachebusters]]
    source = "(postcss|tailwind)\\.config\\.js"
    target = "css"

[caches]
  [caches.images]
    dir    = ":cacheDir/images"
    maxAge = "1440h"
  [caches.getresource]
    dir    = ':cacheDir/:project'
    maxAge = "1h"

[[cascade]]
  [cascade.params]
    hide_in_this_section = true
    show_publish_date    = true
  [cascade.target]
    kind = 'page'
    path = '{/news/**}'
[[cascade]]
  [cascade.params]
    searchable = true
  [cascade.target]
    kind = 'page'
[[cascade]]
  [cascade.params]
    searchable = false
  [cascade.target]
    kind = '{home,section,taxonomy,term}'

[frontmatter]
  date        = ['date'] # do not add publishdate; it will affect page sorting
  expiryDate  = ['expirydate']
  lastmod     = [':git', 'lastmod', 'publishdate', 'date']
  publishDate = ['publishdate', 'date']

[languages]
  [languages.en]
    languageCode = "en-US"
    languageName = "English"
    weight       = 1

[markup]
  [markup.goldmark]
    [markup.goldmark.extensions]
      [markup.goldmark.extensions.typographer]
        disable = false
      [markup.goldmark.extensions.passthrough]
        enable = true
        [markup.goldmark.extensions.passthrough.delimiters]
          block  = [['\[', '\]'], ['$$', '$$']]
          inline = [['\(', '\)']]
    [markup.goldmark.parser]
      autoDefinitionTermID = true
      [markup.goldmark.parser.attribute]
        block = true
  [markup.highlight]
    lineNumbersInTable = false
    noClasses          = false
    style              = 'solarized-dark'
    wrapperClass       = 'highlight not-prose'

[mediaTypes]
  [mediaTypes."text/netlify"]
    delimiter = ""

[module]
  [module.hugoVersion]
    min = "0.144.0"
  [[module.mounts]]
    source = "assets"
    target = "assets"
  [[module.mounts]]
    lang   = 'en'
    source = 'content/en'
    target = 'content'
  [[module.mounts]]
    disableWatch = true
    source       = "hugo_stats.json"
    target       = "assets/notwatching/hugo_stats.json"

[outputFormats]
  [outputFormats.redir]
    baseName    = "_redirects"
    isPlainText = true
    mediatype   = "text/netlify"
  [outputFormats.headers]
    baseName       = "_headers"
    isPlainText    = true
    mediatype      = "text/netlify"
    notAlternative = true

[outputs]
  home     = ["html", "rss", "redir", "headers"]
  page     = ["html"]
  section  = ["html"]
  taxonomy = ["html"]
  term     = ["html"]

[params]
  description = "The worldâ€™s fastest framework for building websites"
  ghrepo      = "https://github.com/gohugoio/hugoDocs/"
  [params.render_hooks.link]
    errorLevel = 'warning' # ignore (default), warning, or error (fails the build)
  [params.social.mastodon]
    url = "https://fosstodon.org/@gohugoio"

[related]
  includeNewer = true
  threshold    = 80
  toLower      = true
  [[related.indices]]
    name   = 'keywords'
    weight = 1

[security]
  [security.funcs]
    getenv = ['^HUGO_', '^REPOSITORY_URL$', '^BRANCH$']

[server]
  [[server.headers]]
    for = "/*"
    [server.headers.values]
      X-Frame-Options        = "DENY"
      X-XSS-Protection       = "1; mode=block"
      X-Content-Type-Options = "nosniff"
      Referrer-Policy        = "no-referrer"
  [[server.headers]]
    for = "/**.{css,js}"

[services]
  [services.googleAnalytics]
    ID = 'G-MBZGKNMDWC'

[taxonomies]
  category = 'categories'

######## GLOBAL ITEMS TO BE SHARED WITH THE HUGO SITES ########
[menus]
  [[menus.global]]
    identifier = 'news'
    name       = 'News'
    pageRef    = '/news/'
    weight     = 1
  [[menus.global]]
    identifier = 'docs'
    name       = 'Docs'
    url        = '/documentation/'
    weight     = 5
  [[menus.global]]
    identifier = 'themes'
    name       = 'Themes'
    url        = 'https://themes.gohugo.io/'
    weight     = 10
  [[menus.global]]
    identifier = 'community'
    name       = 'Community'
    post       = 'external'
    url        = 'https://discourse.gohugo.io/'
    weight     = 150
  [[menus.global]]
    identifier = 'github'
    name       = 'GitHub'
    post       = 'external'
    url        = 'https://github.com/gohugoio/hugo'
    weight     = 200
